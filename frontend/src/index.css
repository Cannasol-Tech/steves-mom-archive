@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Cannasol-inspired palette */
    --brand-blue: #3b82f6;   /* tailwind blue-500 */
    --brand-green: #10b981;  /* tailwind emerald-500 */
    --bg-base: #f1f5f9;      /* slate-100 (darker than slate-50) */
  }
  .dark {
    /* Dark mode tokens */
    --bg-base: #0b1220; /* near slate-950 */
    --brand-blue: #60a5fa; /* blue-400 for contrast */
    --brand-green: #34d399; /* emerald-400 */
  }
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
  
  body {
    @apply text-gray-900 dark:text-gray-100;
    background-color: var(--bg-base);
    /* Spatial gradient + faint starfield dots */
    background-image:
      linear-gradient(rgba(2, 6, 23, 0.02), rgba(2, 6, 23, 0.02)),
      radial-gradient(1200px 600px at 85% -10%, color-mix(in oklab, var(--brand-blue) 18%, transparent) 0%, transparent 60%),
      radial-gradient(1000px 500px at -10% 10%, color-mix(in oklab, var(--brand-green) 14%, transparent) 0%, transparent 65%),
      radial-gradient(800px 400px at 50% 120%, color-mix(in oklab, var(--brand-blue) 10%, transparent) 0%, transparent 70%),
      radial-gradient(1px 1px at 20% 30%, rgba(16, 185, 129, 0.2), transparent 50%),
      radial-gradient(1px 1px at 70% 60%, rgba(59, 130, 246, 0.18), transparent 50%);
    background-repeat: no-repeat;
    background-attachment: fixed;
  }
}

@layer components {
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }
  
  .btn-secondary {
    @apply bg-secondary-200 hover:bg-secondary-300 text-secondary-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
  }
  
  .input-field {
    @apply block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm;
  }
  
  .chat-message {
    @apply p-4 rounded-lg mb-4 max-w-3xl;
  }
  
  .chat-message.user {
    @apply bg-primary-100 ml-auto text-right;
  }
  
  .chat-message.assistant {
    @apply bg-gray-100 mr-auto;
  }
  
  .loading-spinner {
    @apply animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600;
  }
}

@layer utilities {
  .spatial-bg {
    background-color: var(--bg-base);
    background-image:
      radial-gradient(1200px 600px at 85% -10%, color-mix(in oklab, var(--brand-blue) 12%, transparent) 0%, transparent 60%),
      radial-gradient(1000px 500px at -10% 10%, color-mix(in oklab, var(--brand-green) 10%, transparent) 0%, transparent 65%),
      radial-gradient(800px 400px at 50% 120%, color-mix(in oklab, var(--brand-blue) 6%, transparent) 0%, transparent 70%),
      radial-gradient(1px 1px at 20% 30%, rgba(16, 185, 129, 0.15), transparent 50%),
      radial-gradient(1px 1px at 70% 60%, rgba(59, 130, 246, 0.12), transparent 50%);
    background-repeat: no-repeat;
    background-attachment: fixed;
  }

  .rotating-glow {
    position: relative;
    overflow: hidden;
  }

  .rotating-glow::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: conic-gradient(
      from 0deg,
      transparent 0deg,
      rgba(16, 185, 129, 0.1) 60deg,
      rgba(16, 185, 129, 0.4) 120deg,
      rgba(16, 185, 129, 0.8) 180deg,
      rgba(16, 185, 129, 0.4) 240deg,
      rgba(16, 185, 129, 0.1) 300deg,
      transparent 360deg
    );
    border-radius: inherit;
    animation: rotate-glow 4s linear infinite;
    z-index: -1;
  }

  .rotating-glow::after {
    content: '';
    position: absolute;
    inset: 2px;
    background: inherit;
    border-radius: inherit;
    z-index: -1;
  }

  @keyframes rotate-glow {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .pulse-glow {
    animation: pulse-emerald 2s ease-in-out infinite alternate;
  }

  @keyframes pulse-emerald {
    0% {
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
    }
    100% {
      box-shadow: 0 0 40px rgba(16, 185, 129, 0.6), 0 0 80px rgba(16, 185, 129, 0.2);
    }
  }

  /* Custom scrollbar for webkit browsers */
  .custom-scrollbar::-webkit-scrollbar {
    width: 14px;
    height: 14px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 7px;
    margin: 2px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #10b981 0%, #059669 100%);
    border-radius: 7px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease-in-out;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #059669 0%, #047857 100%);
    border-color: rgba(255, 255, 255, 0.5);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:active {
    background: linear-gradient(180deg, #047857 0%, #065f46 100%);
  }

  .custom-scrollbar::-webkit-scrollbar-corner {
    background: rgba(0, 0, 0, 0.1);
  }

  /* Firefox scrollbar support */
  .custom-scrollbar {
    scrollbar-width: auto;
    scrollbar-color: #10b981 rgba(0, 0, 0, 0.15);
  }

  /* Force scrollbar to always be visible */
  .custom-scrollbar {
    overflow-y: scroll !important;
  }

  .reasoning-glow {
    position: relative;
    overflow: hidden;
  }

  .reasoning-glow::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: conic-gradient(
      from 90deg,
      rgba(255, 255, 255, 0) 0deg,
      rgba(255, 255, 255, 0.3) 45deg,
      rgba(255, 255, 255, 0.8) 90deg,
      rgba(255, 255, 255, 0.3) 135deg,
      rgba(255, 255, 255, 0) 180deg
    );
    border-radius: inherit;
    animation: rotate-glow 3s linear infinite;
    z-index: 0;
  }

  .persona-avatar {
    @apply absolute w-24 h-24 opacity-80 transition-transform duration-300 hover:opacity-100 hover:scale-110;
    animation: float 6s ease-in-out infinite;
  }

  @media (max-width: 768px) {
    .persona-avatar {
      @apply hidden;
    }
  }

  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }

  /* Steve's Mom character animation classes */
  .smom-idle { animation: smom-float 4s ease-in-out infinite; }
  .smom-enter { animation: smom-enter 700ms ease-out; }
  .smom-wink .smom-eye { animation: smom-wink 900ms ease-in-out; }
  .smom-kiss .smom-lips { animation: smom-kiss 1100ms ease-in-out; }
  .smom-shimmy { animation: smom-shimmy 1400ms ease-in-out; }
  .smom-dance { animation: smom-dance 1600ms ease-in-out; }
  .smom-bounce { animation: smom-bounce 900ms ease-out; }
  .smom-point-left { animation: smom-point-left 1200ms ease-in-out; }
  .smom-point-right { animation: smom-point-right 1200ms ease-in-out; }
  .smom-breathe { animation: smom-breathe 2.8s ease-in-out infinite; }
  .smom-sway { animation: smom-sway 3.2s ease-in-out infinite; transform-origin: top center; }

  @keyframes smom-float {
    0% { transform: translateY(0); }
    50% { transform: translateY(-6px); }
    100% { transform: translateY(0); }
  }

  @keyframes smom-enter {
    0% { opacity: 0; transform: translateY(10px) scale(0.96); }
    100% { opacity: 1; transform: translateY(0) scale(1); }
  }

  @keyframes smom-wink {
    0%, 100% { height: 4%; }
    40% { height: 1%; }
    60% { height: 5%; }
  }

  @keyframes smom-kiss {
    0% { transform: scale(1); background-color: #fb7185; }
    40% { transform: scale(1.2); background-color: #f43f5e; }
    100% { transform: scale(1); background-color: #fb7185; }
  }

  @keyframes smom-shimmy {
    0% { transform: translateX(0); }
    25% { transform: translateX(-4px); }
    50% { transform: translateX(0); }
    75% { transform: translateX(4px); }
    100% { transform: translateX(0); }
  }

  @keyframes smom-dance {
    0% { transform: rotate(0deg) translateY(0); }
    25% { transform: rotate(4deg) translateY(-4px); }
    50% { transform: rotate(0deg) translateY(0); }
    75% { transform: rotate(-4deg) translateY(-4px); }
    100% { transform: rotate(0deg) translateY(0); }
  }

  @keyframes smom-bounce {
    0% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    100% { transform: translateY(0); }
  }

  @keyframes smom-point-left {
    0% { transform: translateX(0); }
    30% { transform: translateX(-10px); }
    100% { transform: translateX(0); }
  }

  @keyframes smom-point-right {
    0% { transform: translateX(0); }
    30% { transform: translateX(10px); }
    100% { transform: translateX(0); }
  }

  @keyframes smom-breathe {
    0% { transform: scaleY(1); }
    50% { transform: scaleY(1.03); }
    100% { transform: scaleY(1); }
  }

  @keyframes smom-sway {
    0% { transform: rotate(0deg); }
    50% { transform: rotate(1.5deg); }
    100% { transform: rotate(0deg); }
  }
}
