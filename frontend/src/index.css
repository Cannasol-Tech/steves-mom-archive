@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Cannasol-inspired palette */
    --brand-blue: #3b82f6;   /* tailwind blue-500 */
    --brand-green: #10b981;  /* tailwind emerald-500 */
    --bg-base: #f1f5f9;      /* slate-100 (darker than slate-50) */
  }
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }
  
  body {
    @apply text-gray-900;
    background-color: var(--bg-base);
    /* Spatial gradient + faint starfield dots */
    background-image:
      linear-gradient(rgba(2, 6, 23, 0.02), rgba(2, 6, 23, 0.02)),
      radial-gradient(1200px 600px at 85% -10%, color-mix(in oklab, var(--brand-blue) 18%, transparent) 0%, transparent 60%),
      radial-gradient(1000px 500px at -10% 10%, color-mix(in oklab, var(--brand-green) 14%, transparent) 0%, transparent 65%),
      radial-gradient(800px 400px at 50% 120%, color-mix(in oklab, var(--brand-blue) 10%, transparent) 0%, transparent 70%),
      radial-gradient(1px 1px at 20% 30%, rgba(16, 185, 129, 0.2), transparent 50%),
      radial-gradient(1px 1px at 70% 60%, rgba(59, 130, 246, 0.18), transparent 50%);
    background-repeat: no-repeat;
    background-attachment: fixed;
  }
}

@layer components {
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }
  
  .btn-secondary {
    @apply bg-secondary-200 hover:bg-secondary-300 text-secondary-800 font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
  }
  
  .input-field {
    @apply block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm;
  }
  
  .chat-message {
    @apply p-4 rounded-lg mb-4 max-w-3xl;
  }
  
  .chat-message.user {
    @apply bg-primary-100 ml-auto text-right;
  }
  
  .chat-message.assistant {
    @apply bg-gray-100 mr-auto;
  }
  
  .loading-spinner {
    @apply animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600;
  }
}

@layer utilities {
  .spatial-bg {
    background-color: var(--bg-base);
    background-image:
      radial-gradient(1200px 600px at 85% -10%, color-mix(in oklab, var(--brand-blue) 12%, transparent) 0%, transparent 60%),
      radial-gradient(1000px 500px at -10% 10%, color-mix(in oklab, var(--brand-green) 10%, transparent) 0%, transparent 65%),
      radial-gradient(800px 400px at 50% 120%, color-mix(in oklab, var(--brand-blue) 6%, transparent) 0%, transparent 70%),
      radial-gradient(1px 1px at 20% 30%, rgba(16, 185, 129, 0.15), transparent 50%),
      radial-gradient(1px 1px at 70% 60%, rgba(59, 130, 246, 0.12), transparent 50%);
    background-repeat: no-repeat;
    background-attachment: fixed;
  }

  .rotating-glow {
    position: relative;
    overflow: hidden;
  }

  .rotating-glow::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: conic-gradient(
      from 0deg,
      transparent 0deg,
      rgba(16, 185, 129, 0.1) 60deg,
      rgba(16, 185, 129, 0.4) 120deg,
      rgba(16, 185, 129, 0.8) 180deg,
      rgba(16, 185, 129, 0.4) 240deg,
      rgba(16, 185, 129, 0.1) 300deg,
      transparent 360deg
    );
    border-radius: inherit;
    animation: rotate-glow 4s linear infinite;
    z-index: -1;
  }

  .rotating-glow::after {
    content: '';
    position: absolute;
    inset: 2px;
    background: inherit;
    border-radius: inherit;
    z-index: -1;
  }

  @keyframes rotate-glow {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .pulse-glow {
    animation: pulse-emerald 2s ease-in-out infinite alternate;
  }

  @keyframes pulse-emerald {
    0% {
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
    }
    100% {
      box-shadow: 0 0 40px rgba(16, 185, 129, 0.6), 0 0 80px rgba(16, 185, 129, 0.2);
    }
  }

  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: color-mix(in oklab, var(--brand-green) 40%, transparent);
    border-radius: 10px;
    border: 2px solid transparent;
    background-clip: content-box;
    transition: background-color 0.2s ease-in-out;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: color-mix(in oklab, var(--brand-green) 70%, transparent);
  }

  .reasoning-glow {
    position: relative;
    overflow: hidden;
  }

  .reasoning-glow::before {
    content: '';
    position: absolute;
    inset: -2px;
    background: conic-gradient(
      from 90deg,
      rgba(255, 255, 255, 0) 0deg,
      rgba(255, 255, 255, 0.3) 45deg,
      rgba(255, 255, 255, 0.8) 90deg,
      rgba(255, 255, 255, 0.3) 135deg,
      rgba(255, 255, 255, 0) 180deg
    );
    border-radius: inherit;
    animation: rotate-glow 3s linear infinite;
    z-index: 0;
  }

  .persona-avatar {
    @apply absolute w-24 h-24 opacity-80 transition-transform duration-300 hover:opacity-100 hover:scale-110;
    animation: float 6s ease-in-out infinite;
  }

  @media (max-width: 768px) {
    .persona-avatar {
      @apply hidden;
    }
  }

  @keyframes float {
    0% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
    100% {
      transform: translateY(0px);
    }
  }
}
